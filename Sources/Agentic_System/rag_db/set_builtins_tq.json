{
  "body": "Files and Torque builtins implementing Set.prototype methods (union/intersection/difference/symmetricDifference):\n\n1) builtins/set-union.tq\n - transitioning javascript builtin SetPrototypeUnion(js-implicit context: NativeContext, receiver: JSAny)(other: JSAny): JSSet\n - High-level flow: Cast receiver to JSSet; GetSetRecord(other); NewStableBackingTableWitness; CloneFixedArray(table.GetTable(), ExtractFixedArrayFlag::kFixedArrays); typeswitch on other (JSSetWithNoCustomIteration, JSMapWithNoCustomIteration, JSAny -> SlowPath); iteration via collections::NewUnmodifiedOrderedHashSetIterator or NewUnmodifiedOrderedHashMapIterator or GetKeysIterator; uses AddToSetTable(resultSetData, key, methodName).\n\n2) builtins/set-intersection.tq\n - transitioning javascript builtin SetPrototypeIntersection(js-implicit context: NativeContext, receiver: JSAny)(other: JSAny): JSSet\n - Creates empty AllocateOrderedHashSet(); computes sizes; uses FastIntersect<T> macro for fast paths; uses OrderedHashSetIterator or NewUnmodifiedOrderedHashSetIterator; uses AddToSetTable and TableHasKey; SlowPath uses iterator::IteratorStep/IteratorValue.\n\n3) builtins/set-difference.tq\n - transitioning javascript builtin SetPrototypeDifference(js-implicit context: NativeContext, receiver: JSAny)(other: JSAny): JSSet\n - Copies receiver table (CloneFixedArray), then either FastDifference<T> or iterates keys; uses DeleteFromSetTable(resultSetData, key) and TableHasKey and ShrinkOrderedHashSetIfNeeded(numberOfElements, resultSetData).\n\n4) builtins/set-symmetric-difference.tq\n - transitioning javascript builtin SetPrototypeSymmetricDifference(js-implicit context: NativeContext, receiver: JSAny)(other: JSAny): JSSet\n - Copies receiver table; iterates other; uses FastSymmetricDifference macro which calls NormalizeNumberKey, TableHasKey, DeleteFromSetTable, AddToSetTable; finally calls ShrinkOrderedHashSetIfNeeded.\n\nHelper Torque macros called (declared/extern in builtins/collections.tq and others):\n - collections::AddToSetTable(context, table, key, methodName)\n - collections::DeleteFromSetTable(context, table, key)\n - collections::TableHasKey(context, table, key)\n - collections::NormalizeNumberKey(key)\n - CloneFixedArray (CodeStubAssembler macro)\n - GetSetRecord, GetKeysIterator (iterator helpers from builtins/collections.tq)\n - NewUnmodifiedOrderedHashSetIterator / NewUnmodifiedOrderedHashMapIterator / NewOrderedHashSetIterator (collections.tq macros)\n - ShrinkOrderedHashSetIfNeeded\n - FastIntersect / FastDifference / FastSymmetricDifference macros defined in the respective .tq files.\n\nWhy this entry is saved: centralizes Torque entry points and the helper macros used across union/intersection/difference/symmetricDifference. Useful RAG id for linking to generated CSA and OrderedHashTable APIs.\n",
  "context": [
    "set_methods_v1"
  ],
  "explanation": "Primary Torque entry points for Set.prototype.{union,intersection,difference,symmetricDifference} and the helper macros they call (AddToSetTable, DeleteFromSetTable, TableHasKey, NormalizeNumberKey, iterator helpers). This captures the exact Torque signatures and the control-flow decisions that choose fast/slow paths and iterator usage.",
  "file_line": "builtins/set-union.tq:1-200; builtins/set-intersection.tq:1-300; builtins/set-difference.tq:1-300; builtins/set-symmetric-difference.tq:1-300"
}