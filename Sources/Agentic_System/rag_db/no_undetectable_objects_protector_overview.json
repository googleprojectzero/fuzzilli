{
  "body": "Summary of located code sections for NoUndetectableObjects protector and null/undefined equality optimizations:\n\n1) JSTypedLowering / Turbofan folding (compiler/js-typed-lowering.cc)\n - Symbols: JSTypedLowering::ReduceJSEqual, JSTypedLowering::ReduceJSStrictEqual\n - Behavior: ReduceJSEqual folds abstract equality when one input is NullOrUndefined into ObjectIsUndetectable (changes op: simplified()->ObjectIsUndetectable()). ReduceJSStrictEqual covers strict cases and falls back to ReferenceEqual/SpeculativeNumberEqual etc. ReduceJSEqual contains the exact JSGraphAssembler sequence which tests left/right for Undefined/Null and generates ObjectIsUndetectable on the other side.\n - File: compiler/js-typed-lowering.cc (functions ReduceJSEqual, ReduceJSStrictEqual)\n\n2) JSNativeContextSpecialization helpers (compiler/js-native-context-specialization.cc)\n - Symbols: JSNativeContextSpecialization::Reduce (various reductions), helpers used by context specialization for property/global folding and dependencies. While a specific dedicated ReduceJSEqual in this file was not found, native-context specialization contains many property/compare folding helpers and uses CompilationDependencies to record protector deps when lowering (e.g., DependOnPrototypeProperty, DependOnGlobalProperty).\n - File: compiler/js-native-context-specialization.cc\n\n3) Compilation dependency / protector registration (compiler/compilation-dependencies.cc / .h)\n - Symbols: CompilationDependencies::DependOnNoUndetectableObjectsProtector(), class ProtectorDependency\n - Behavior: DependOnNoUndetectableObjectsProtector wraps the factory property cell for no_undetectable_objects_protector and records a ProtectorDependency (checks the cell's value equals Protectors::kProtectorValid and installs DependentCode::kPropertyCellChangedGroup).\n - File: compiler/compilation-dependencies.cc (ProtectorDependency class and DependOnNoUndetectableObjectsProtector implementation)\n\n4) Turboshaft / TurboFan lowering and machine lowering (compiler/turboshaft/machine-lowering-reducer-inl.h and related)\n - Symbols: Machine lowering handling of ObjectIsOp::Kind::kUndetectable (and ReceiverOrNullOrUndefined)\n - Behavior: Machine lowering checks DependOnNoUndetectableObjectsProtector() (calls broker_->dependencies()->DependOnNoUndetectableObjectsProtector()) and when true emits map-bitfield checks (Map::Bits1::IsUndetectableBit) or uses an explicit JumpIfUndetectable lowering; ties protector dependency to generated checks. See function DependOnNoUndetectableObjectsProtector() inside this header which calls broker_->dependencies()->DependOnNoUndetectableObjectsProtector().\n - File: compiler/turboshaft/machine-lowering-reducer-inl.h\n\n5) Maglev front-end and lowering (maglev/*)\n - Symbols: MaglevGraphBuilder::BuildTestUndetectable, MaglevGraphBuilder::VisitTestUndetectable, maglev::TestUndetectable::GenerateCode, maglev::BranchIfUndetectable lowering and maglev assembler methods\n - Behavior: Maglev IR contains TestUndetectable and BranchIfUndetectable nodes (maglev/maglev-ir.h/.cc). GraphBuilder exposes BuildTestUndetectable; VisitTestUndetectable uses it. TestUndetectable::GenerateCode emits JumpIfNotUndetectable/JumpIfUndetectable assembler calls; assembler methods call dependencies()->DependOnNoUndetectableObjectsProtector() to attach protector dependency when emitting map-bitfield tests. Maglev assembler methods JumpIfUndetectable/JumpIfNotUndetectable set up map bit tests and conditionally call ->DependOnNoUndetectableObjectsProtector() when the check is used.\n - Files: maglev/maglev-graph-builder.cc, maglev/maglev-ir.cc, maglev/maglev-assembler.cc, maglev/maglev-assembler.h, maglev/*-assembler-*-inl.h\n\n6) Other relevant spots\n - CodeStubAssembler/Bytecode lowering: ObjectIsUndetectable operator (simplified op) used in many places: compiler/simplified-operator.{h,cc}, compiler/simplified-lowering.cc, compiler/graph-assembler.cc:JSGraphAssembler::ObjectIsUndetectable creates simplified()->ObjectIsUndetectable() nodes.\n - Bytecode & Interpreter: interpreter/bytecode-array-builder.cc and interpreter/interpreter-generator.cc implement TestUndetectable and use Map::Bits1::IsUndetectableBit in bytecode interpreter lowering.\n\nWhy these are important:\n - The core transformation for abstract equality with null/undefined is performed in JSTypedLowering::ReduceJSEqual: abstract equality where one side is null/undefined is lowered to ObjectIsUndetectable of the other side; that simplification is what allows backend (Turbofan/TurboShaft/Maglev) to lower to fast map-bit tests guarded by a protector.\n - The protector dependency is recorded via CompilationDependencies::DependOnNoUndetectableObjectsProtector(), which records a ProtectorDependency so generated optimized code will be invalidated if undetectable objects become observable (i.e., protector invalidated).\n - Turboshaft machine-lowering and Maglev lowerings both consult DependOnNoUndetectableObjectsProtector() before emitting map-bit checks; if the dependency cannot be made, they fallback to slower paths.\n\nRepresentative file locations and symbols (so you can pull exact code blocks):\n - compiler/js-typed-lowering.cc: JSTypedLowering::ReduceJSEqual (search for \"ReduceJSEqual\" and the ObjectIsUndetectable replacement) and ReduceJSStrictEqual\n - compiler/compilation-dependencies.cc: ProtectorDependency class; CompilationDependencies::DependOnNoUndetectableObjectsProtector\n - compiler/turboshaft/machine-lowering-reducer-inl.h: DependOnNoUndetectableObjectsProtector() helper and case handling for ObjectIsOp::Kind::kUndetectable (search for \"kUndetectable\" and Map::Bits1::IsUndetectableBit)\n - maglev/maglev-graph-builder.cc: BuildTestUndetectable / VisitTestUndetectable\n - maglev/maglev-ir.cc: TestUndetectable::GenerateCode, BranchIfUndetectable codegen\n - maglev/maglev-assembler.cc and inl headers: JumpIfUndetectable/JumpIfNotUndetectable which call ->DependOnNoUndetectableObjectsProtector()\n - compiler/graph-assembler.cc: JSGraphAssembler::ObjectIsUndetectable\n - compiler/simplified-operator.{h,cc} and compiler/simplified-lowering.cc: ObjectIsUndetectable operator usage and lowering\n\nSuggested next steps to extract exact code blocks:\n - Open compiler/js-typed-lowering.cc around ReduceJSEqual and copy the sequence that replaces JSEqual with ObjectIsUndetectable (we already located it). This contains the JSGraphAssembler sequence and phi creation.\n - Open compiler/compilation-dependencies.cc to extract ProtectorDependency::IsValid/Install and DependOnNoUndetectableObjectsProtector implementation.\n - Open compiler/turboshaft/machine-lowering-reducer-inl.h and inspect the code paths for ObjectIsOp::Kind::kUndetectable and the DependOnNoUndetectableObjectsProtector helper.\n - Open maglev/maglev-ir.cc and maglev/maglev-graph-builder.cc to extract BuildTestUndetectable and TestUndetectable::GenerateCode and assembler lowering that records dependencies and creates deopt metadata (frame state/checks).\n\nThese file locations and symbol names provide a cross-tier map linking the high-level IR folding (JSTypedLowering) to dependency registration (CompilationDependencies) to backend lowering (Turboshaft machine lowering and Maglev codegen).",
  "context": [
    "ReduceJSEqual",
    "ReduceJSStrictEqual",
    "CompilationDependencies::DependOnNoUndetectableObjectsProtector",
    "ProtectorDependency",
    "TurboshaftMachineLowering:ObjectIsUndetectable",
    "Maglev:TestUndetectable"
  ],
  "explanation": "Aggregated mapping of code locations where abstract equality with null/undefined is folded to ObjectIsUndetectable and where the NoUndetectableObjects protector dependency is recorded and used by backend lowerings. Useful to pull exact code snippets and confirm protector-based guards and deopt metadata wiring.",
  "file_line": "See compiler/js-typed-lowering.cc (ReduceJSEqual/ReduceJSStrictEqual), compiler/compilation-dependencies.cc (ProtectorDependency, DependOnNoUndetectableObjectsProtector), compiler/turboshaft/machine-lowering-reducer-inl.h (ObjectIsOp kUndetectable handling), maglev/maglev-graph-builder.cc and maglev/maglev-ir.cc (BuildTestUndetectable, VisitTestUndetectable, TestUndetectable::GenerateCode), maglev/maglev-assembler.cc (JumpIfUndetectable / DependOnNoUndetectableObjectsProtector calls)"
}