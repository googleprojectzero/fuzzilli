{
  "body": "Files and functions:\n- builtins/builtins-string.cc: ConvertCase, ConvertCaseHelper, BUITIN(StringPrototypeToLowerCase), BUITIN(StringPrototypeToUpperCase), handling both ASCII fast-path (FastAsciiConvert) and generic mapping via runtime_state()->to_lower_mapping()/to_upper_mapping(). Uses String::Flatten on input and allocates SeqOneByte or SeqTwoByte results depending on overflow cases.\n- builtins/builtins-intl-gen.cc / builtins/builtins-intl.cc: IntlBuiltinsAssembler::ToLowerCaseImpl and TF_BUILTIN(StringToLowerCaseIntl) and StringPrototypeToLowerCaseIntl/ToUpperCaseIntl \u2013 these call Runtime/StringToLowerCaseIntl or Intl::ConvertToLower/Upper for locale-sensitive conversions.\n- runtime/runtime-intl.cc: RUNTIME_FUNCTION(Runtime_StringToLowerCaseIntl) and Runtime_StringToUpperCaseIntl call Intl::ConvertToLower/Upper.\n- codegen/external-reference.cc & codegen/code-stub-assembler.cc: provide C-callable shims for ConvertOneByteToLower etc (ConvertOneByteToLower -> Intl::ConvertOneByteToLower). These are used by generated builtins and code stubs.\nRelevant gates/flags:\n- V8_INTL_SUPPORT (built with/without Intl changes behavior: if disabled, builtins/builtins-string.cc implements non-locale sensitive ConvertCase; if enabled, builtins-intl takes precedence).\n- Builtin registration in init/bootstrapper.cc installs both Intl and plain builtins (see lines registering Builtin::kStringPrototypeToLowerCaseIntl vs kStringPrototypeToLowerCase). \nWhy this is interesting: ConvertCase/ConvertCaseHelper is the central runtime implementation for non-locale and fallback case conversions; it interacts directly with Unicode mapping tables and chooses representation/alloc size and second pass if multi-char expansions occur.\nFileLine: \"builtins/builtins-string.cc: (ConvertCase/ConvertCaseHelper and BUITINs); builtins/builtins-intl-gen.cc and runtime/runtime-intl.cc; init/bootstrapper.cc registers builtins.\"",
  "context": [
    "unicode_tables_and_helpers"
  ],
  "explanation": "Captures the primary builtin implementations and how Intl/locale-sensitive variants are dispatched and where the C++ ConvertCase logic lives. Useful for tracing hot paths and where flattening/allocation decisions occur.",
  "file_line": "builtins/builtins-string.cc:1-400; builtins/builtins-intl-gen.cc; runtime/runtime-intl.cc:1-80; init/bootstrapper.cc:5900-5960"
}