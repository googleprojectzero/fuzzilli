{
  "body": "Operators and lowering for context-extension checks\n\n1) src/compiler/js-operator.h/.cc\n- Declaration:\n  const Operator* JSOperatorBuilder::HasContextExtension(size_t depth);\n- Definition (js-operator.cc):\n  const Operator* JSOperatorBuilder::HasContextExtension(size_t depth) {\n    return zone()->New<Operator1<size_t>>(  // --\n        IrOpcode::kJSHasContextExtension,\n        Operator::kNoWrite | Operator::kNoThrow,  // flags\n        \"JSHasContextExtension\",                  // name\n        0, 1, 0, 1, 1, 0,                         // counts\n        depth);                                   // parameter\n  }\n\n2) src/compiler/js-typed-lowering.cc\n- Reduction specializing away the dynamic check where possible:\n  Reduction JSTypedLowering::ReduceJSHasContextExtension(Node* node) {\n    DCHECK_EQ(IrOpcode::kJSHasContextExtension, node->opcode());\n    // ... lookup ScopeInfo and decode HasContextExtensionSlotBit. For script contexts\n    // and other cases, fold to false (no extension) or keep dynamic depending on info.\n    // Snippet near constants:\n    // gasm.Uint32Constant(ScopeInfo::HasContextExtensionSlotBit::kMask)\n  }\n\n3) src/codegen/code-stub-assembler.{h,cc}\n- Runtime-agnostic helper used in interpreter fast path:\n  TNode<Context> CodeStubAssembler::GotoIfHasContextExtensionUpToDepth(\n      TNode<Context> context, TNode<Uint32T> depth, Label* if_has_extension);\n\nUsage in TF bytecode builder:\n- If TryGetScopeInfo() provides usable scope info and dependencies allow,\n  BytecodeGraphBuilder elides dynamic JSHasContextExtension calls and/or replaces\n  slow paths completely by Depending on EmptyContextExtension (EmptyContextExtension dependency).\n- Otherwise it emits JSHasContextExtension nodes per depth, branches and merges slow path.\n",
  "context": [
    "bgb_lookup_paths",
    "bgb_lookup_fastpaths"
  ],
  "explanation": "Shows the JSHasContextExtension operator and how typed lowering specializes it, plus the code-stub-assembler helper used by Ignition. This explains the mechanism controlling whether fast-path IC/global/context loads are allowed without runtime lookup.",
  "file_line": "js-operator.cc:1223-1229; js-typed-lowering.cc:1520-1564; code-stub-assembler.h:3883 / .cc:14148"
}