{
  "body": "Key files and symbols:\n- src/objects/string.h / string-inl.h / string.cc: Core string classes and APIs.\n  - Classes: String (base), SeqOneByteString, SeqTwoByteString, SeqString, ConsString, SlicedString, ThinString, ExternalString, ExternalOneByteString, ExternalTwoByteString.\n  - ConsString iterator: ConsStringIterator (objects/string.h) and related methods Continue/NextLeaf in objects/string.cc.\n  - Flattening: String::Flatten(isolate, Handle<String>) declared in objects/string.h and implemented across string-inl.h and string.cc; SlowFlatten (String::SlowFlatten) for out-of-line flattening.\n  - WriteToFlat / WriteToFlat2 implementations: String::WriteToFlat templates and WriteToFlat2 that walk ConsStrings and write into provided sink buffers (objects/string.h, objects/string.cc lines ~760-1130). WriteToFlat handles one-byte/two-byte and uses access_guard for external strings.\n  - Representation helpers: SeqOneByteString::SizeFor, SeqTwoByteString::SizeFor, AllocatedSize helpers, ExternalString::ExternalPayloadSize(), IsOneByteRepresentation(), IsSeqString(), IsExternalString(), IsConsString(), IsSlicedString(), IsThinString() (objects/string-inl.h / objects/string.h).\n  - ConsString invariants: ConsString::kMinLength gating whether concatenations create ConsString or SeqString (objects/string.h / compiler/js-typed-lowering.cc uses this).\nWhy interesting: This area contains the iteration over heterogeneous representations, the fast paths for flat seq strings, and the slow-path flattening algorithm that decides allocation size and handles external/sliced/thin/cons nodes. Flatten/WriteToFlat are invoked pervasively prior to conversions and concatenation.\nFileLine: \"src/objects/string.h / src/objects/string-inl.h / src/objects/string.cc (WriteToFlat: ~770-1130, ConsStringIterator: ~1287-2200, Flatten/SlowFlatten: string-inl.h around 640-760 and string.cc around 700-1200).\"",
  "context": [
    "cons_sliced_external_seq_thin",
    "flatten_write_to_flat"
  ],
  "explanation": "Captures where string representations are defined, how iteration and flattening are implemented, and where WriteToFlat walks various string kinds to produce a contiguous backing store. Provides the primary entry points used by builtins and runtime code.",
  "file_line": "objects/string.h:240-320; objects/string-inl.h:640-780; objects/string.cc:760-1130"
}