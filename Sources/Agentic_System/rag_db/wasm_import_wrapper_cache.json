{
  "body": "Files: src/wasm/wasm-import-wrapper-cache.{h,cc}\n- Class: v8::internal::wasm::WasmImportWrapperCache (shared per-process cache for Wasm\u2192JS import wrappers)\n  - struct CacheKey { ImportCallKind kind; CanonicalTypeIndex type_index; int expected_arity; Suspend suspend; } with equality and custom hash.\n  - ModificationScope: RAII acquiring spinning mutex to modify cache; provides operator[](CacheKey) lookup in entry_map_ and AddWrapper to install newly compiled code.\n  - LazyInitialize(Isolate*): reserves code space via WasmCodeManager, creates WasmCodeAllocator and initializes code range.\n  - CompileWasmImportCallWrapper(Isolate*, ImportCallKind, const CanonicalSig*, CanonicalTypeIndex, bool source_positions, int expected_arity, Suspend): calls compiler::CompileWasmImportCallWrapper, then under ModificationScope inserts code into entry_map_ and codes_ (sorted by instruction_start). Logs code and increments counters post-scope to avoid lock inversion.\n  - MaybeGet(kind, sig_index, expected_arity, suspend): thread-safe lookup; increments WasmCodeRefScope ref-count.\n  - FindWrapper(WasmCodePointer call_target): reverse-lookup from code pointer table to WasmCode*; used by wasm-objects.cc and engine to identify wrappers.\n  - Lookup(Address pc): for disassembly/logging, resolves pc into a wrapper WasmCode*; increments refcount.\n  - Free(vector<WasmCode*>& wrappers): removes from maps, frees code memory via WasmCodeAllocator, deletes WasmCode objects; called when dispatch tables or instances are freed.\n  - EstimateCurrentMemoryConsumption(): returns size incl. map contents.\n- Integration hooks:\n  - GetWasmImportWrapperCache(): global accessor in src/wasm/wasm-engine.{h,cc}. The engine manages lifecycle, lazy initialization, logging, freeing.\n  - Callers: module-compiler.{cc} during instantiation and import resolution; wasm-objects.cc sets wrappers in WasmDispatchTable; runtime/runtime-wasm.cc tier-up path (Runtime_TierUpWasmToJSWrapper) consults cache via MaybeGet/CompileWasmImportCallWrapper.\n",
  "context": [
    "wasm_wrappers_ts_overview",
    "wasm_to_js_cache",
    "runtime_tiering_points",
    "wasm_engine_hooks"
  ],
  "explanation": "Documents the Wasm\u2192JS import wrapper cache implementation and lifecycle, including key methods and where it is invoked. Anchors concrete functions for compilation, lookup, and freeing, and the global accessor in the engine.",
  "file_line": "wasm/wasm-import-wrapper-cache.h:26-; wasm/wasm-import-wrapper-cache.cc:22-"
}