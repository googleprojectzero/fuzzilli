{
  "body": "Primary wrapper codegen entry points and builders:\n- src/wasm/wrappers.cc\n  - class WasmWrapperTSGraphBuilder: Turboshaft-based builder for wrappers.\n    - void BuildJSToWasmWrapper(bool do_conversion=true, OptionalOpIndex frame_state=..., bool set_in_wasm_flag=true)\n      \u2022 Parses JS call frame (closure, context), validates JS-compatible signature, optionally fast-path converts JS args to wasm (FromJSFast/CanTransformFast), otherwise default conversion (FromJS / BuildChangeTaggedToInt32/Float64/BigIntToI64 etc). Constructs wasm call via BuildCallWasmFromWrapper using compiler::GetWasmCallDescriptor(..., WasmCallKind::kWasmIndirectFunction). Handles returns: 0\u2192undefined, 1\u2192ToJS, multi\u2192AllocateJSArray and fill elements. Manages thread_in_wasm flag and optional stack switching helpers.\n    - void BuildWasmToJSWrapper(ImportCallKind kind, int expected_arity, Suspend suspend)\n      \u2022 Builds JS-side call from wasm import data: loads native_context and callable, constructs JS args converting wasm\u2192JS via ToJS, chooses path among: kJSFunctionArityMatch/kJSFunctionArityMismatch via Linkage::GetJSCallDescriptor and dynamic receiver selection; or kUseCallBuiltin via Builtin::kCall_ReceiverIsAny with CallTrampolineDescriptor. Handles expected_arity padding with undefined. Manages central stack switching and thread_in_wasm flag. Suspends via promises if requested, and converts return(s) back FromJS or iterable\u2192FixedArray for multi-return.\n    - void BuildCapiCallWrapper()\n      \u2022 Bridges wasm\u2192C API calls: marshal params/returns through stack slot buffer, call host C function address from WasmFunctionData, manage thread_in_wasm flag, rethrow via Builtin::kWasmRethrowExplicitContext on error pointer.\n    - Many helpers: ToJS, FromJS, FromJSFast, CanTransformFast, BuildChangeTaggedToFloat64/Int32, BuildChangeBigIntToInt64, BuildCallWasmFromWrapper, BuildSwitchToTheCentralStackIfNeeded/Back, BuildSuspend, etc. Uses TSCallDescriptor::Create over CallDescriptor from Linkage APIs.\n  - void BuildWasmWrapper(PipelineData*, AccountingAllocator*, Graph&, const CanonicalSig*, WrapperCompilationInfo)\n    \u2022 Dispatches to appropriate builder based on CodeKind (JS_TO_WASM_FUNCTION, WASM_TO_JS_FUNCTION, WASM_TO_CAPI_FUNCTION).\n\nCompiler/Turbofan counterparts and wrapper pipeline integrations:\n- src/compiler/wasm-compiler.cc\n  - class WasmWrapperGraphBuilder (non-turboshaft), with equivalent methods:\n    \u2022 BuildJSToWasmWrapper(bool do_conversion=false, Node* frame_state=nullptr, bool set_in_wasm_flag=true)\n    \u2022 BuildWasmToJSWrapper(ImportCallKind kind, int expected_arity, Suspend suspend)\n    \u2022 BuildCapiCallWrapper(), BuildCWasmEntry(), BuildJSFastApiCallWrapper(...)\n    \u2022 Helpers mirror TS version: ToJS/FromJS/FromJSFast, BuildChange* conversions, BuildSwitchTo/Back central stack, BuildSuspend for promising, AddArgumentNodes, etc.\n  - Wasm wrapper codegen factories:\n    \u2022 BuildInlinedJSToWasmWrapper(...): emit inline wrapper in JS graph inlining contexts.\n    \u2022 NewJSToWasmCompilationJob(...): Pipeline::NewWasmTurboshaftWrapperCompilationJob with WrapperCompilationInfo{CodeKind::JS_TO_WASM_FUNCTION}.\n    \u2022 CompileWasmImportCallWrapper(kind,sig,...): Produces WasmCompilationResult via Pipeline::GenerateCodeForWasmNativeStubFromTurboshaft with WrapperCompilationInfo{CodeKind::WASM_TO_JS_FUNCTION,kind,expected_arity,suspend}.\n    \u2022 CompileWasmCapiCallWrapper(sig), CompileWasmJSFastCallWrapper(sig, callable).\n  - Call descriptors: uses Linkage::GetJSCallDescriptor, Linkage::GetStubCallDescriptor for builtins, and compiler::GetWasmCallDescriptor(..., WasmCallKind::kWasmIndirectFunction).\n\nCallDescriptors definitions/utilities:\n- src/compiler/wasm-call-descriptors.h\n  - class WasmCallDescriptors: provides GetBigIntToI64Descriptor(bool needs_frame_state) and GetLoweredCallDescriptor (32-bit) used by wrappers for i64 BigInt conversion builtins.\n",
  "context": [
    "wasm_wrappers",
    "wasm_wrappers_cache",
    "wasm_objects",
    "wasm_call_desc",
    "wasm_compiler_entry"
  ],
  "explanation": "Captures the main entry points and builders for JS\u2194Wasm wrapper generation, including Turboshaft and Turbofan graph builders, the wrapper pipeline dispatch, and how call descriptors are constructed. This directly answers item (1) in the task: BuildJSToWasmWrapper/BuildWasmToJSWrapper, and references CallDescriptors usage.",
  "file_line": "wasm/wrappers.cc:414-; compiler/wasm-compiler.cc:7733,8022, end; compiler/wasm-call-descriptors.h:1-"
}