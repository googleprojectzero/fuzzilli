{
  "body": "Turboshaft MachineLoweringReducer handling ObjectIsOp::Kind::kUndetectable and calling broker()->dependencies()->DependOnNoUndetectableObjectsProtector\n\nSymbols:\n- MachineLoweringReducer::REDUCE(ObjectIs) handling case ObjectIsOp::Kind::kUndetectable\n- DependOnNoUndetectableObjectsProtector helper inside MachineLoweringReducer\n\nFiles/paths:\n- src/compiler/turboshaft/machine-lowering-reducer-inl.h (ObjectIs handling and DependOnNoUndetectableObjectsProtector)\n\nSummary of relevant code behavior:\n- In the REDUCE(ObjectIs) implementation, for case ObjectIsOp::Kind::kUndetectable the reducer first tries to call DependOnNoUndetectableObjectsProtector(). If true, it generates a simple check: input == undefined || input == null (returns Word32 bitwise OR of those checks). If DependOnNoUndetectableObjectsProtector() returns false, the code falls through to the general heap-object map-based undetectable bit checks, including loading the map and testing Map::Bits1::IsUndetectableBit.\n- The internal DependOnNoUndetectableObjectsProtector() method (near end of file) checks if broker_->dependencies() exists and calls broker_->dependencies()->DependOnNoUndetectableObjectsProtector(); it returns true if that was registered.\n\nImportant lines / behavior locations:\n- src/compiler/turboshaft/machine-lowering-reducer-inl.h: around REDUCE(ObjectIs) case for kUndetectable and at file bottom for the bool DependOnNoUndetectableObjectsProtector() implementation.\n- When DependOnNoUndetectableObjectsProtector() is true, MachineLoweringReducer emits only null/undefined comparisons and does not consult map undetectable bit, leveraging the protector to guarantee absence of undetectable objects.\n\nWhy important: This shows TurboShaft lowering respects the protector by depending on it and simplifying the check to literal null/undefined compares. The dependency is attached to the broker's compilation dependencies via DependOnNoUndetectableObjectsProtector, linking back to ProtectorDependency (see undetectable_b_protector).",
  "context": [
    "undetectable_a_jstypedlowering",
    "undetectable_b_protector"
  ],
  "explanation": "Describes where TurboShaft attaches the protector and how that changes generated lowering for ObjectIsUndetectable.",
  "file_line": "compiler/turboshaft/machine-lowering-reducer-inl.h: REDUCE(ObjectIs) kUndetectable and DependOnNoUndetectableObjectsProtector() implementation"
}