{
  "body": "// Specialization bits used by Array.prototype.forEach lowering for elements kinds, hole checks, and loads\n// src/maglev/maglev-graph-builder.cc (within TryReduceArrayForEach)\nElementsKind elements_kind;\nif (!CanInlineArrayIteratingBuiltin(broker(), node_info->possible_maps(), &elements_kind)) {\n  return ReduceResult::Fail();\n}\nif (!broker()->dependencies()->DependOnNoElementsProtector()) return ReduceResult::Fail();\n...\nValueNode* elements = BuildLoadElements(receiver);\nValueNode* element;\nif (IsDoubleElementsKind(elements_kind)) {\n  element = BuildLoadFixedDoubleArrayElement(elements, index_int32);\n} else {\n  element = BuildLoadFixedArrayElement(elements, index_int32);\n}\nstd::optional<MaglevSubGraphBuilder::Label> skip_call;\nif (IsHoleyElementsKind(elements_kind)) {\n  skip_call.emplace(&sub_builder, 2, {&var_length});\n  if (elements_kind == HOLEY_DOUBLE_ELEMENTS) {\n    sub_builder.GotoIfTrue<BranchIfFloat64IsHole>(&*skip_call, {element});\n  } else {\n    sub_builder.GotoIfTrue<BranchIfRootConstant>(&*skip_call, {element}, RootIndex::kTheHoleValue);\n  }\n}\n\n// Under the hood, these helpers are called/available elsewhere:\n// BuildLoadElements(object) -> loads JSObject::kElementsOffset\n// BuildLoadFixedArrayElement / BuildLoadFixedDoubleArrayElement\n// BuildLoadHoleyFixedDoubleArrayElement + ConvertHoleToUndefined / CheckNotHole used in other array accesses\n\n// NoElementsProtector dependency\n// src/execution/protectors.h is referenced via broker()->dependencies()->DependOnNoElementsProtector()\n\n// Map checks and transitions helpers used across arrays and element ICs\n// - BuildCheckMaps, CheckMaps, CheckMapsWithMigration\n// - BuildTransitionElementsKindOrCheckMap\n",
  "context": [
    "maglev_foreach_tryreduce",
    "maglev_foreach_deopt"
  ],
  "explanation": "Captures elements kind specialization for forEach lowering: it gates inlining on CanInlineArrayIteratingBuiltin and NoElementsProtector; loads elements backing store; uses FixedArray vs FixedDoubleArray loads; emits hole checks for HOLEY kinds and skips callbacks on holes. It also references reusable helpers and protector dependency logic for correctness of fast-element assumptions.",
  "file_line": "maglev/maglev-graph-builder.cc:8089-8219; 6001-6200 (helper BuildLoadElements)"
}