{
  "body": "maglev/maglev-graph-builder.cc:\n- ReduceResult MaglevGraphBuilder::BuildLoadTypedArrayLength(ValueNode* object, ElementsKind elements_kind) { ... return AddNewNode<LoadTypedArrayLength>({object}, elements_kind); ... }\n- void MaglevGraphBuilder::BuildStoreTypedArrayElement(ValueNode* object, ValueNode* index, ElementsKind elements_kind) { switch (elements_kind) { case UINT8_CLAMPED_ELEMENTS: AddNewNode<StoreIntTypedArrayElement>({object, index, GetAccumulatorUint8ClampedForToNumber()}, elements_kind); ... case INT8_ELEMENTS...UINT32_ELEMENTS: AddNewNode<StoreIntTypedArrayElement>({object, index, GetAccumulatorTruncatedInt32ForToNumber(NodeType::kNumberOrOddball, TaggedToFloat64ConversionType::kNumberOrOddball)}, elements_kind); ... case FLOAT32_ELEMENTS/FLOAT64_ELEMENTS: AddNewNode<StoreDoubleTypedArrayElement>({object, index, GetAccumulatorHoleyFloat64ForToNumber(NodeType::kNumberOrOddball, TaggedToFloat64ConversionType::kNumberOrOddball)}, elements_kind); }\n- ReduceResult MaglevGraphBuilder::TryBuildElementAccessOnTypedArray(ValueNode* object, ValueNode* index_object, const compiler::ElementAccessInfo& access_info, compiler::KeyedAccessMode const& keyed_mode) { DCHECK(HasOnlyJSTypedArrayMaps(...)); ElementsKind elements_kind = access_info.elements_kind(); if (elements_kind == FLOAT16_ELEMENTS || elements_kind == BIGUINT64_ELEMENTS || elements_kind == BIGINT64_ELEMENTS) return Fail(); if (keyed_mode.access_mode() == kLoad && LoadModeHandlesOOB(...)) return Fail(); if (keyed_mode.access_mode() == kStore && StoreModeIgnoresTypeArrayOOB(...)) return Fail(); if (keyed_mode.access_mode() == kStore && elements_kind == UINT8_CLAMPED_ELEMENTS && !IsSupported(CpuOperation::kFloat64Round)) return Fail(); if (!broker()->dependencies()->DependOnArrayBufferDetachingProtector()) AddNewNode<CheckTypedArrayNotDetached>({object}); ValueNode* index = GetUint32ElementIndex(index_object); ValueNode* length = BuildLoadTypedArrayLength(object, elements_kind); AddNewNode<CheckTypedArrayBounds>({index, length}); switch (keyed_mode.access_mode()) { case kLoad: return BuildLoadTypedArrayElement(object, index, elements_kind); case kStore: BuildStoreTypedArrayElement(object, index, elements_kind); return Done(); ... } }\n- VisitSetKeyedProperty() builds feedback, calls TryBuildElementAccess for ElementAccess feedback with AccessMode::kStore; the generic fallback calls SetKeyedGeneric builtin with feedback.\n- Polymorphic path TryBuildPolymorphicElementAccess: filters RAB/GSAB typed arrays out, otherwise dispatches to TryBuildElementAccessOnTypedArray; monomorphic path checks transitions / maps first.\n\nNotes:\n- Feedback nexus and IC kind: Megamorphic cases call Builtin::kKeyed[Load|Store]IC_Megamorphic. Otherwise, tries to compute ElementAccessInfos from feedback vector via AccessInfoFactory; checks prototype dependencies for stores; has transitions and stable map deps.\n- Mono vs Poly: If access_infos.size()==1, possibly BuildTransitionElementsKindOrCheckMap, then TypedArray vs JSArray/JSObject dispatch. Else builds map chain with subgraph builder and possibly generic path label.\n- Fast/slow split conditions: disallow FLOAT16/BIGINT64/BIGUINT64, RAB/GSAB elements kinds fail-fast; disallow OOB-handling load/store modes for typed arrays; if UINT8_CLAMPED and no kFloat64Round cpu op, bail; ensure ArrayBufferDetachingProtector else insert CheckTypedArrayNotDetached; always coerce index to uint32, load TA length, then CheckTypedArrayBounds before load/store.",
  "context": [
    "maglev_ir_nodes",
    "maglev_codegen_x64_arm64",
    "objects_typedarray",
    "elements_kind_helpers"
  ],
  "explanation": "This record anchors the Maglev graph-builder side for the TA keyed-store pipeline, showing VisitSetKeyedProperty -> TryBuildElementAccessOnTypedArray -> BuildStoreTypedArrayElement, including feedback handling, mono/poly map checks, RAB/GSAB gating, OOB mode gating, detaching protector, index/length/bounds checks, and Uint8Clamped rounding CPU feature check.",
  "file_line": "maglev/maglev-graph-builder.cc:6001-6200, 7300-7380, 6117 signature, 7348 VisitSetKeyedProperty"
}