{
  "body": "// src/builtins/array-foreach.tq (key parts)\nnamespace array {\ntransitioning javascript builtin ArrayForEachLoopEagerDeoptContinuation(\n    js-implicit context: NativeContext, receiver: JSAny)(callback: JSAny,\n    thisArg: JSAny, initialK: JSAny, length: JSAny): JSAny {\n  const jsreceiver = Cast<JSReceiver>(receiver) otherwise unreachable;\n  const callbackfn = Cast<Callable>(callback) otherwise unreachable;\n  const numberK = Cast<Number>(initialK) otherwise unreachable;\n  const numberLength = Cast<Number>(length) otherwise unreachable;\n  return ArrayForEachLoopContinuation(jsreceiver, callbackfn, thisArg,\n      Undefined, jsreceiver, numberK, numberLength, Undefined);\n}\n\ntransitioning javascript builtin ArrayForEachLoopLazyDeoptContinuation(\n    js-implicit context: NativeContext, receiver: JSAny)(callback: JSAny,\n    thisArg: JSAny, initialK: JSAny, length: JSAny, _result: JSAny): JSAny {\n  const jsreceiver = Cast<JSReceiver>(receiver) otherwise unreachable;\n  const callbackfn = Cast<Callable>(callback) otherwise unreachable;\n  const numberK = Cast<Number>(initialK) otherwise unreachable;\n  const numberLength = Cast<Number>(length) otherwise unreachable;\n  return ArrayForEachLoopContinuation(jsreceiver, callbackfn, thisArg,\n      Undefined, jsreceiver, numberK, numberLength, Undefined);\n}\n\ntransitioning builtin ArrayForEachLoopContinuation(\n    implicit context: Context)(_receiver: JSReceiver, callbackfn: Callable,\n    thisArg: JSAny, _array: JSAny, o: JSReceiver, initialK: Number, len: Number,\n    _to: JSAny): JSAny {\n  for (let k: Number = initialK; k < len; k = k + 1) {\n    const kPresent: Boolean = HasProperty_Inline(o, k);\n    if (kPresent == True) {\n      const kValue: JSAny = GetProperty(o, k);\n      Call(context, callbackfn, thisArg, kValue, k, o);\n    }\n  }\n  return Undefined;\n}\n\ntransitioning macro FastArrayForEach(implicit context: Context)(o: JSReceiver,\n    len: Number, callbackfn: Callable, thisArg: JSAny): JSAny\n    labels Bailout(Smi) {\n  let k: Smi = 0;\n  const smiLen = Cast<Smi>(len) otherwise goto Bailout(k);\n  const fastO = Cast<FastJSArray>(o) otherwise goto Bailout(k);\n  let fastOW = NewFastJSArrayWitness(fastO);\n  for (; k < smiLen; k++) {\n    fastOW.Recheck() otherwise goto Bailout(k);\n    if (k >= fastOW.Get().length) goto Bailout(k);\n    const value: JSAny = fastOW.LoadElementNoHole(k) otherwise continue;\n    Call(context, callbackfn, thisArg, value, k, fastOW.Get());\n  }\n  return Undefined;\n}\n\ntransitioning javascript builtin ArrayForEach(...)\n  try { ... try FastArrayForEach(o, len, callbackfn, thisArg) otherwise Bailout; ...\n         return ArrayForEachLoopContinuation(o, callbackfn, thisArg, Undefined, o, k, len, Undefined);\n  } label TypeError deferred { ThrowCalledNonCallable(arguments[0]); }\n",
  "context": [
    "maglev_foreach_deopt",
    "maglev_foreach_tryreduce"
  ],
  "explanation": "Torque builtins define the deopt continuation entrypoints used by Maglev for Array.prototype.forEach. Eager and Lazy deopt continuations both tail into ArrayForEachLoopContinuation, which runs a canonical indexed loop over [0, len), calling the callback for present indices. Maglev DeoptFrameScopes reference Builtin::kArrayForEachLoop(Eager|Lazy)DeoptContinuation to reconstruct state and resume in Torque in case of deopt or exception.",
  "file_line": "builtins/array-foreach.tq:6-40,94-167"
}