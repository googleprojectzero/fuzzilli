std::exception_ptr - cppreference.com cppreference.com Create account Log in Namespaces Page Discussion Variants Views View Edit History Actions std:: exception_ptr From cppreference.com < cpp ‎ | error C++ Compiler support Freestanding and hosted Language Standard library Standard library headers Named requirements Feature test macros (C++20) Language support library Concepts library (C++20) Diagnostics library Memory management library Metaprogramming library (C++11) General utilities library Containers library Iterators library Ranges library (C++20) Algorithms library Strings library Text processing library Numerics library Date and time library Input/output library Filesystem library (C++17) Concurrency support library (C++11) Execution control library (C++26) Technical specifications Symbols index External libraries [edit] Diagnostics library Exception handling exception uncaught_exception uncaught_exceptions ( until C++20* ) (C++17) exception_ptr (C++11) make_exception_ptr (C++11) current_exception (C++11) rethrow_exception (C++11) nested_exception (C++11) throw_with_nested (C++11) rethrow_if_nested (C++11) Exception handling failures terminate terminate_handler get_terminate (C++11) set_terminate bad_exception unexpected ( until C++17* ) unexpected_handler ( until C++17* ) get_unexpected ( until C++17* ) set_unexpected ( until C++17* ) Error numbers Error codes errno Assertions assert Exception categories logic_error invalid_argument domain_error length_error out_of_range runtime_error range_error overflow_error underflow_error tx_exception (TM TS) System error error_category (C++11) generic_category (C++11) system_category (C++11) error_condition (C++11) errc (C++11) error_code (C++11) system_error (C++11) Stacktrace stacktrace_entry (C++23) basic_stacktrace (C++23) Debugging support is_debugger_present (C++26) breakpoint_if_debugging (C++26) breakpoint (C++26) [edit] Defined in header <exception> using exception_ptr = /*unspecified*/ (since C++11) std::exception_ptr is a nullable pointer-like type that manages an exception object which has been thrown and captured with std::current_exception . An instance of std::exception_ptr may be passed to another function, possibly on another thread, where the exception may be rethrown and handled with a catch clause. A default-constructed std::exception_ptr is a null pointer; it does not point to an exception object. Two instances of std::exception_ptr compare equal only if they are both null or both point at the same exception object. std::exception_ptr is not implicitly convertible to any arithmetic, enumeration, or pointer type. It is contextually convertible to bool , and will evaluate to false if it is null, true otherwise. The exception object referenced by an std::exception_ptr remains valid as long as there remains at least one std::exception_ptr that is referencing it: std::exception_ptr is a shared-ownership smart pointer (note: this is in addition to the usual exception object lifetime rules ). std::exception_ptr meets the requirements of NullablePointer . [ edit ] Example [edit] Run this code #include <exception> #include <iostream> #include <stdexcept> #include <string> void handle_eptr ( std :: exception_ptr eptr ) // passing by value is OK { try { if ( eptr ) std:: rethrow_exception ( eptr ) ; } catch ( const std:: exception & e ) { std:: cout << "Caught exception: '" << e. what ( ) << "' \n " ; } } int main ( ) { std :: exception_ptr eptr ; try { [ [ maybe_unused ] ] char ch = std:: string ( ) . at ( 1 ) ; // this generates a std::out_of_range } catch ( ... ) { eptr = std:: current_exception ( ) ; // capture } handle_eptr ( eptr ) ; } // destructor for std::out_of_range called here, when the eptr is destructed Possible output: Caught exception: 'basic_string::at: __n (which is 1) >= this->size() (which is 0)' [ edit ] See also make_exception_ptr (C++11) creates an std::exception_ptr from an exception object (function template) [edit] current_exception (C++11) captures the current exception in a std::exception_ptr (function) [edit] rethrow_exception (C++11) throws the exception from an std::exception_ptr (function) [edit] Retrieved from " https://en.cppreference.com/mwiki/index.php?title=cpp/error/exception_ptr&oldid=177877 " Navigation Support us Recent changes FAQ Offline version Toolbox What links here Related changes Upload file Special pages Printable version Permanent link Page information In other languages Deutsch Español Français Italiano 日本語 Português Русский 中文 This page was last modified on 24 November 2024, at 14:05. Privacy policy About cppreference.com Disclaimers