std::mbsinit - cppreference.com cppreference.com Create account Log in Namespaces Page Discussion Variants Views View Edit History Actions std:: mbsinit From cppreference.com < cpp ‎ | string ‎ | multibyte C++ Compiler support Freestanding and hosted Language Standard library Standard library headers Named requirements Feature test macros (C++20) Language support library Concepts library (C++20) Diagnostics library Memory management library Metaprogramming library (C++11) General utilities library Containers library Iterators library Ranges library (C++20) Algorithms library Strings library Text processing library Numerics library Date and time library Input/output library Filesystem library (C++17) Concurrency support library (C++11) Execution control library (C++26) Technical specifications Symbols index External libraries [edit] Text processing library Localization library Regular expressions library (C++11) Formatting library (C++20) Null-terminated sequence utilities Byte strings Multibyte strings Wide strings Primitive numeric conversions to_chars (C++17) to_chars_result (C++17) from_chars (C++17) from_chars_result (C++17) chars_format (C++17) Text encoding identifications text_encoding (C++26) [edit] Null-terminated multibyte strings Functions Wide/multibyte examination mblen mbrlen mbsinit Multibyte/wide conversions mbtowc mbstowcs btowc mbrtowc mbsrtowcs wctomb wcstombs wctob wcrtomb wcsrtombs mbrtoc8 (C++20) mbrtoc16 (C++11) mbrtoc32 (C++11) c8rtomb (C++20) c16rtomb (C++11) c32rtomb (C++11) Types mbstate_t Macros MB_LEN_MAX MB_CUR_MAX __STDC_UTF_16__ __STDC_UTF_32__ (C++11) (C++11) [edit] Defined in header <cwchar> int mbsinit ( const std:: mbstate_t * ps ) ; If ps is not a null pointer, the mbsinit function determines whether the pointed-to std::mbstate_t object describes the initial conversion state. Contents 1 Notes 2 Parameters 3 Return value 4 Example 5 See also [ edit ] Notes Although a zero-initialized std::mbstate_t always represents the initial conversion state, there may be other values of std::mbstate_t that also represent the initial conversion state. [ edit ] Parameters ps - pointer to the std::mbstate_t object to examine [ edit ] Return value ​ 0 ​ if ps is not a null pointer and does not represent the initial conversion state, nonzero value otherwise. [ edit ] Example Run this code #include <clocale> #include <cwchar> #include <iostream> #include <string> int main ( ) { // allow mbrlen() to work with UTF-8 multibyte encoding std:: setlocale ( LC_ALL , "en_US.utf8" ) ; // UTF-8 narrow multibyte encoding std:: string str = "水" ; // or u8"\u6c34" or "\xe6\xb0\xb4" std:: mbstate_t mb = std:: mbstate_t ( ) ; ( void ) std:: mbrlen ( & str [ 0 ] , 1 , & mb ) ; if ( ! std :: mbsinit ( & mb ) ) std:: cout << "After processing the first 1 byte of " << str << " the conversion state is not initial \n " ; ( void ) std:: mbrlen ( & str [ 1 ] , str. size ( ) - 1 , & mb ) ; if ( std :: mbsinit ( & mb ) ) std:: cout << "After processing the remaining 2 bytes of " << str << ", the conversion state is initial conversion state \n " ; } Output: After processing the first 1 byte of 水 the conversion state is not initial After processing the remaining 2 bytes of 水, the conversion state is initial conversion state [ edit ] See also mbstate_t conversion state information necessary to iterate multibyte character strings (class) [edit] C documentation for mbsinit Retrieved from " https://en.cppreference.com/mwiki/index.php?title=cpp/string/multibyte/mbsinit&oldid=153083 " Navigation Support us Recent changes FAQ Offline version Toolbox What links here Related changes Upload file Special pages Printable version Permanent link Page information In other languages Deutsch Español Français Italiano 日本語 Português Русский 中文 This page was last modified on 9 June 2023, at 23:24. Privacy policy About cppreference.com Disclaimers