std::use_facet - cppreference.com cppreference.com Create account Log in Namespaces Page Discussion Variants Views View Edit History Actions std:: use_facet From cppreference.com < cpp ‎ | locale C++ Compiler support Freestanding and hosted Language Standard library Standard library headers Named requirements Feature test macros (C++20) Language support library Concepts library (C++20) Diagnostics library Memory management library Metaprogramming library (C++11) General utilities library Containers library Iterators library Ranges library (C++20) Algorithms library Strings library Text processing library Numerics library Date and time library Input/output library Filesystem library (C++17) Concurrency support library (C++11) Execution control library (C++26) Technical specifications Symbols index External libraries [edit] Text processing library Localization library Regular expressions library (C++11) Formatting library (C++20) Null-terminated sequence utilities Byte strings Multibyte strings Wide strings Primitive numeric conversions to_chars (C++17) to_chars_result (C++17) from_chars (C++17) from_chars_result (C++17) chars_format (C++17) Text encoding identifications text_encoding (C++26) [edit] Localization library Locales and facets Locales has_facet use_facet locale Facet category base classes ctype_base codecvt_base messages_base time_base money_base ctype facets ctype ctype <char> ctype_byname codecvt codecvt_byname numeric facets num_get num_put numpunct numpunct_byname collate facets collate collate_byname time facets time_get time_put time_get_byname time_put_byname monetary facets money_get money_put moneypunct moneypunct_byname messages facets messages messages_byname Character classification and conversion Character classification isspace iscntrl isupper islower isalpha ispunct isdigit isxdigit isalnum isblank (C++11) isprint isgraph Character conversions toupper tolower String and stream conversions wstring_convert ( C++11/17/26* ) wbuffer_convert ( C++11/17/26* ) Unicode conversion facets codecvt_utf8 ( C++11/17/26* ) codecvt_utf16 ( C++11/17/26* ) codecvt_utf8_utf16 ( C++11/17/26* ) codecvt_mode ( C++11/17/26* ) C library locales LC_ALL LC_COLLATE LC_CTYPE LC_MONETARY LC_NUMERIC LC_TIME setlocale localeconv lconv [edit] Defined in header <locale> template < class Facet > const Facet & use_facet ( const std:: locale & loc ) ; Obtains a reference to a facet implemented by loc . The program is ill-formed if Facet is not a facet whose definition contains the public static member id or it is a volatile-qualified facet. Contents 1 Parameters 2 Return value 3 Exceptions 4 Notes 5 Example 6 Defect reports 7 See also [ edit ] Parameters loc - the locale object to query [ edit ] Return value Returns a reference to the facet. The reference returned by this function is valid as long as any std::locale object refers to that facet. [ edit ] Exceptions std::bad_cast if std:: has_facet < Facet > ( loc ) == false . [ edit ] Notes A std::locale object should not be a temporary if a reference to the Facet object obtained from use_facet is used after the end of statement: // BAD: auto & f = std :: use_facet < std:: moneypunct < char , true >> ( std:: locale { "no_NO.UTF-8" } ) ; foo ( f. curr_symbol ( ) ) ; // Error: f internally uses a dangling reference // to a std::locale object that no longer exists. // GOOD: auto loc = std:: locale { "is_IS.UTF-8" } ; // OK: a non-temporary object auto & f = std :: use_facet < std:: moneypunct < char , true >> ( loc ) ; foo ( f. curr_symbol ( ) ) ; // OK: f internally uses a reference to existing locale object. [ edit ] Example Display the 3-letter currency name used by the user's preferred locale. Run this code #include <iostream> #include <locale> int main ( ) { for ( const char * name : { "en_US.UTF-8" , "de_DE.UTF-8" , "en_GB.UTF-8" } ) std:: cout << "Your currency string is " << std :: use_facet < std:: moneypunct < char , true >> ( std:: locale { name } ) . curr_symbol ( ) << ' \n ' ; } Output: Your currency string is USD Your currency string is EUR Your currency string is GBP [ edit ] Defect reports The following behavior-changing defect reports were applied retroactively to previously published C++ standards. DR Applied to Behavior as published Correct behavior LWG 31 C++98 the returned reference remained usable as long as the locale value itself exists the returned reference remains usable as long as some locale object refers to that facet LWG 38 C++98 Facet was not required to have a direct member id required LWG 436 C++98 it was unclear whether Facet can be cv-qualified it can be const-qualified, but not volatile-qualified [ edit ] See also locale set of polymorphic facets that encapsulate cultural differences (class) [edit] has_facet checks if a locale implements a specific facet (function template) [edit] Retrieved from " https://en.cppreference.com/mwiki/index.php?title=cpp/locale/use_facet&oldid=169771 " Navigation Support us Recent changes FAQ Offline version Toolbox What links here Related changes Upload file Special pages Printable version Permanent link Page information In other languages Deutsch Español Français Italiano 日本語 Português Русский 中文 This page was last modified on 12 February 2024, at 15:21. Privacy policy About cppreference.com Disclaimers